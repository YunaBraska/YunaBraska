name: TEST_WORKFLOW

on:
  workflow_dispatch:
    inputs:
      my_field:
        type: string
        description: "Test String"
        required: true
  workflow_call:
      inputs:
        my_field:
          type: string
          description: "Test String"
          required: true
  repository_dispatch:
    types: [ test_event ]

jobs:
  log-the-inputs:
    runs-on: ubuntu-latest
    steps:
      - run: |
          echo "workflow_call_my_field [$workflow_call_my_field]"
          echo "workflow_dispatch_my_field [$workflow_dispatch_my_field]"
          echo "repository_dispatch_my_field [$repository_dispatch_my_field]"
          echo "Combined [${workflow_dispatch_my_field:-${repository_dispatch_my_field:-default}}]"
          echo "Combined2 [${combined3}]"
        env:
          workflow_call_my_field: ${{ inputs.my_field }}
          workflow_dispatch_my_field: ${{ github.event.inputs.my_field }}
          repository_dispatch_my_field: ${{ github.event.client_payload.my_field }}
          combined3: {% if variable is defined %}variable is defined{% else %}variable is not defined{% endif %}

